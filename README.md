# gisdata

Решение состоит из четырех модулей:
- GisData - проект с граббером
- DbClassLibrary - библиотека классов для работы с БД
- GisWcfService - WCF-сервис для обращения за данными к базе
- WpfClient - WPF-прилжения для отображения прогнозов

Для связывания таблиц БД и классов библиотеки DbClassLibrary, а так же получения данных из MySql используются MySql.Data.EntityFramework и EntityFramework и 

Граббер и WCF-сервис работают с БД, используя классы и методы из DbClassLibrary и настройки подключения к БД, указанные в конфигурации.
Граббер собирает данные по городам с сайта (парсит html при помощи HtmlAgilityPack) и добавляет данные городов в базу. 
Есть возможность парсить локальный html (необходимо в конфигурации в настройке "gismeteo.local" указать путь к локальному файлу) и вызвать метод сервиса gisService.GetLocalData() вместо gisService.GetData().
Данные по прогнозам граббер получает, используя API Gismeteo (для корректной работы необходимо в конфигурации в настройке "gismeteo.token" указать токен для доступа к API).

WCF-сервис через методы, опредленные в DbClassLibrary, "читает" данные из базы и передает их через свои методы.

WpfClient, используя методы GisWcfService, получает список городов и заполняет выпадающий список при и загрузке главного окна.
При изменении выбранного города вызывается метод получения актуального прогноза для выбранного города и отображаются данные полученного прогноза.
Если прогнозов для города не найдено - выдается сообщение об ошибке.
